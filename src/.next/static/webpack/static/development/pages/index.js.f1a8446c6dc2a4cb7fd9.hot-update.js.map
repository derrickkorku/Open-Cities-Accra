{"version":3,"file":"static/webpack/static/development/pages/index.js.f1a8446c6dc2a4cb7fd9.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import { Component } from \"react\";\nimport Link from \"next/link\";\nimport ReactMapGL, { NavigationControl, Marker, Popup, } from \"react-map-gl\";\nimport {fromJS} from \"immutable\"\nimport fetch from \"isomorphic-unfetch\";\n//const base_url =\"https://ocav1-app.herokuapp.com\" || \"http://localhost:5000\"  \nconst base_url = \"http://localhost:5000\" || \"https://ocav1-app.herokuapp.com\" \n\nclass Index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      floodData:null,\n      buildingData:null,\n      drainageData:null,\n      render:false,\n      viewport: {\n        width: \"inherit\",\n        height: \"inherit\",\n        latitude: 5.62620,\n        longitude: -0.23250,\n       \n        zoom: 17.0\n      },\n      popupInfo: null,\n      floodPopupInfo:null,\n      placeInfo: null,\n      floodPlaceInfo:null\n    };\n  }\n\ncomponentDidMount(){\n    this.setState({render:true})\n    mapboxgl.accessToken  = \"pk.eyJ1Ijoid2lzZG9tMDA2MyIsImEiOiJjanI1aWg0cGQwZTByM3dtc3J1OHJ3MGNqIn0.yjtKpgtEmgCkCcLvpH_tJg\"; \n   }\n\nrenderFloodPopup() {\n    \n    return (\n      this.state.floodPopupInfo && (\n        <Popup\n          tipSize={10}\n          anchor=\"bottom-right\"\n          longitude={this.state.floodPopupInfo.state.longitude}\n          latitude={this.state.floodPopupInfo.state.latitude}\n          onClose={() => this.setState({ floodPopupInfo: null })}\n          closeOnClick={true}\n        >\n          <table width=\"400\">\n            <tbody>\n              <tr>\n                <th>experienced_flood</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.experienced_flood}\n                </td>\n              </tr>\n              <tr>\n                <th tyle={{ width: \"80px\" }}>suburb</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.suburb}\n                </td>\n              </tr>\n              <tr>\n                <th>flood_cause</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.flood_cause}\n                </td>\n              </tr>\n              <tr>\n                <th>flood_year</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.flood_year}\n                </td>\n              </tr>\n              <tr>\n                <th>dwelling_type</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.dwelling_type}\n                </td>\n              </tr>\n              <tr>\n                <th>flood_depth</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.flood_depth}\n                </td>\n              </tr>\n              <tr>\n                <th>landmark</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.landmark}\n                </td>\n              </tr>\n              <tr>\n                <th>moved_house</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.moved_house}\n                </td>\n              </tr>\n            {\n                this.state.floodPlaceInfo.moved_house ===\"yes\" &&\n                <tr>\n                <th>moved_year</th>\n                <td style={{ paddingLeft: \"5px\" }}>\n                  {this.state.floodPlaceInfo.moved_year}\n                </td>\n              </tr>\n              }\n\n            </tbody>\n          </table>\n        </Popup>\n      )\n    );\n  }\n\n  render() {\n\n    var map = this.state.render && new mapboxgl.Map({\n      container: 'map',\n      style:\"mapbox://styles/mapbox/streets-v9\",\n      zoom: 17,\n      center: [-0.23188090993107835, 5.6279210505577595]     \n      \n      });\n\n     this.state.render && map.addControl(new mapboxgl.NavigationControl())\n  \n    this.state.render && map.on(\"load\", function () {\n        // Add a layer showing the state polygons.\n        map.addLayer({\n        'id': 'buildings',\n        'type': 'fill',\n        'source': {\n        'type': 'geojson',\n        'data': base_url + \"/static/data/alobgoshie-buildings.geojson\"\n        },\n        'layout': {},\n        'paint': {\n        'fill-color': '#088',\n        'fill-opacity': 0.2,\n        'fill-outline-color': 'red'\n        }\n        });\n\n        // When a click event occurs on a feature in the states layer, open a popup at the\n// location of the click, with description HTML from its properties.\nmap.on('click', 'buildings', function (e) {\n  window.alert(e.lngLat)\n  new mapboxgl.Popup()\n  .setLngLat(e.lngLat)\n  .setHTML(        `\n  <table width=\"300\">\n  <tbody>\n  ${\n    e.features[0].properties[\"name\"] && `<tr>\n    <th>Name</th>\n    <td style={{ paddingLeft: \"5px\" }}>\n    ${e.features[0].properties[\"name\"]}\n    </td>\n    </tr>` || \"\"\n  }\n    ${\n      e.features[0].properties[\"addr:community\"] && `<tr>\n      <th>Community</th>\n      <td style={{ paddingLeft: \"5px\" }}>\n      ${e.features[0].properties[\"addr:community\"]}\n      </td>\n      </tr>` || \"\"\n    }\n\n    ${\n      e.features[0].properties[\"building:material\"] && `<tr>\n      <th>Building material</th>\n      <td style={{ paddingLeft: \"5px\" }}>\n      ${e.features[0].properties[\"building:material\"]}\n      </td>\n      </tr>` || \"\"\n    }\n    ${\n      e.features[0].properties[\"roof:material\"] && `<tr>\n      <th>Roof material</th>\n      <td style={{ paddingLeft: \"5px\" }}>\n      ${e.features[0].properties[\"roof:material\"]}\n      </td>\n      </tr>` || \"\"\n    }\n\n  ${\n    e.features[0].properties[\"addr:street\"] && `<tr>\n    <th>Street</th>\n    <td style={{ paddingLeft: \"5px\" }}>\n    ${e.features[0].properties[\"addr:street\"]}\n    </td>\n    </tr>` || \"\"\n  }\n\n  ${\n    e.features[0].properties[\"addr:city\"] && `<tr>\n    <th>City</th>\n    <td style={{ paddingLeft: \"5px\" }}>\n    ${e.features[0].properties[\"addr:city\"]}\n    </td>\n    </tr>` || \"\"\n  }\n\n\n  ${\n    e.features[0].properties[\"addr:suburb\"] && `<tr>\n    <th>Suburb</th>\n    <td style={{ paddingLeft: \"5px\" }}>\n    ${e.features[0].properties[\"addr:suburb\"]}\n    </td>\n    </tr>` || \"\"\n  }\n\n  ${\n    e.features[0].properties[\"addr:amenity\"] && `<tr>\n    <th>Amenity</th>\n    <td style={{ paddingLeft: \"5px\" }}>\n    ${e.features[0].properties[\"addr:amenity\"]}\n    </td>\n    </tr>` || \"\"\n  }\n\n\n${\n  e.features[0].properties[\"religion\"] && `<tr>\n  <th>Religion</th>\n  <td style={{ paddingLeft: \"5px\" }}>\n  ${e.features[0].properties[\"religion\"]}\n  </td>\n  </tr>` || \"\"\n}\n\n${\n  e.features[0].properties[\"building\"] && `<tr>\n  <th>Building</th>\n  <td style={{ paddingLeft: \"5px\" }}>\n  ${e.features[0].properties[\"building\"]}\n  </td>\n  </tr>` || \"\"\n}\n\n${\n  e.features[0].properties[\"denomination\"] && `<tr>\n  <th>Denomination</th>\n  <td style={{ paddingLeft: \"5px\" }}>\n  ${e.features[0].properties[\"denomination\"]}\n  </td>\n  </tr>` || \"\"\n}\n\n${\n  e.features[0].properties[\"source\"] && `<tr>\n  <th>Source</th>\n  <td style={{ paddingLeft: \"5px\" }}>\n  ${e.features[0].properties[\"source\"]}\n  </td>\n  </tr>` || \"\"\n}\n    </tbody>\n    </table>`\n    )\n  .addTo(map);\n  });\n   \n  // Change the cursor to a pointer when the mouse is over the states layer.\n  map.on('mouseenter', 'buildings', function () {\n  map.getCanvas().style.cursor = 'pointer';\n  });\n   \n  // Change it back to a pointer when it leaves.\n  map.on('mouseleave', 'buildings', function () {\n  map.getCanvas().style.cursor = '';\n  });\n\n        map.addLayer({\n          'id': 'drainage',\n          'type': 'line',\n          'source': {\n          'type': 'geojson',\n          'data': base_url + \"/static/data/alogboshie_waterways.geojson\"\n          },\n          'paint': {\n                  \"line-color\":\"blue\",\n                  \"line-width\":3\n                         }\n          });\n\n          map.addLayer({\n            'id': 'flood',\n            'type': 'circle',\n            'source': {\n            'type': 'geojson',\n            'data': base_url + \"/static/data/alogboshie_flod_history.geojson\"\n            },\n            'paint': {\n                    \"circle-color\":\"gray\",\n                    \"circle-radius\":10\n                           }\n            });\n      \n    })\n    return (\n      <div>\n        <div className=\"container-fluid mt-3 mr-10 ml-10\">\n          <div className=\"row\">\n            <div className=\"col-sm-3\" style={{ marginTop: \"0.8em\" }}>\n              <center>\n                <Link href=\"/\">\n                  <a className=\"home-link\">HOME</a>\n                </Link>\n              </center>\n            </div>\n            <div className=\"col-sm-9\">\n            <div className=\"row\">\n            <div className=\"col-md-2\"></div>\n            <div className=\"col-sm-6\">\n              <h4 className=\"font-weight-bold\">ALOGBOSHIE</h4>\n              </div>\n              <div className=\"col-sm-4\">\n         \n                <select className=\"form-control mb-3 mr-3 w-100 rounded\" disabled>\n                  <option>-- Select Community --</option>\n                  <option>Akweteyman</option>\n                  <option selected>Alogboshie</option>\n                  <option>Alajo</option>\n                  <option>Nima</option>\n                </select>\n          \n           \n              </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"row index-pg\">\n            <div className=\"col-sm-3\">\n              <ul className=\"list-unstyled px-3 py-3 rounded bg-sidebar shadow\">\n                <li className=\"mb-3\">\n                  <Link href=\"/buildings\">\n                    <a className=\"btn btn-lg btn-block btn-light rounded p-home-btn\">\n                      <i className=\"fas fa-home fa-2x fa-color\" />\n                      <br />\n                      Building\n                    </a>\n                  </Link>\n                </li>\n                <li className=\"mb-3\">\n                  <Link href=\"/flood-history\">\n                    <a className=\"btn btn-lg btn-block btn-light rounded p-home-btn\">\n                      <i className=\"fab fa-fort-awesome-alt fa-2x fa-color\" />\n                      <br />\n                      Flood History\n                    </a>\n                  </Link>\n                </li>\n                <li className=\"\">\n                  <Link href=\"/drainage\">\n                    <a className=\"btn btn-lg btn-block btn-lg btn-light rounded p-home-btn\">\n                      <i className=\"fab fa-schlix fa-2x fa-color\" />\n                      <br />\n                      Drainage Points\n                    </a>\n                  </Link>\n                </li>\n              </ul>\n              <Link href=\"/contact\">\n                <a className=\"btn btn-dark btn-block\">Contact</a>\n              </Link>\n            </div>\n            <div className=\"col-sm-9\">\n              <div className=\"map-border\" style={{ height: \"700px\" }}>\n              <div id=\"map\"></div>\n              <div id='state-legend' class='legend'>\n<h4></h4>\n<div><span style={{backgroundColor:\"#088\"}}></span>Buildings</div>\n<div><span style={{backgroundColor:\"blue\"}}></span>Drainage</div>\n<div><span style={{backgroundColor:\"gray\"}} ></span>Flood History</div>\n</div>\n              \n              </div>\n            </div>\n          </div>\n        </div>\n        <footer className=\"footer\">\n          <div className=\"container\">\n            <center>Powered by:</center>\n            <div className=\"row justify-content-center\">\n              <ul className=\"list-inline py-2\">\n                <li className=\"list-inline-item\">\n                  <Link href=\"http://mobilewebghana.org/\">\n                    <a target=\"_blank\">\n                      <img\n                        src=\"../static/img/partners/mwg.png\"\n                        className=\"partner\"\n                      />\n                    </a>\n                  </Link>\n                </li>\n                <li className=\"list-inline-item\">\n                  <Link href=\"https://www.osmghana.org/\">\n                    <a target=\"_blank\">\n                      <img\n                        src=\"../static/img/partners/osmghana.png\"\n                        className=\"partner\"\n                      />\n                    </a>\n                  </Link>\n                </li>\n                <li className=\"list-inline-item\"  >\n                  <Link href=\"https://www.hotosm.org/\">\n                    <a target=\"_blank\" style={{width:\"800px !important\"}}>\n                      <img\n                        src=\"../static/img/hot.png\" \n                        className=\"hot\"\n                      />\n                    </a>\n                  </Link>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default Index;\n"],"mappings":"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","sourceRoot":""}